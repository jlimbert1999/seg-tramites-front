<div class="animate__animated animate__fadeInLeft animate__faster">
  <p>
    <mat-toolbar color="primary">
      <button mat-icon-button (click)="backLocation()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <span>{{ detail ? detail.procedure.code : "" }}</span>
      <span class="toolbar-spacer"></span>
    </mat-toolbar>
  </p>
  <div class="container-fluid">
    @if(detail){
    <mat-card>
      <div class="d-sm-flex">
        <div class="me-auto">
          <mat-card-header>
            <div mat-card-avatar class="header-card-image"></div>
            <mat-card-title>
              {{ detail.emitter.fullname | titlecase }}
            </mat-card-title>
            <mat-card-subtitle>
              {{ detail.emitter.jobtitle }}
            </mat-card-subtitle>
          </mat-card-header>
        </div>
        <span class="fs-6 p-3"
          >{{ detail.outboundDate | date : "short" }}
        </span>
      </div>
      <mat-card-content>
        <dl class="row">
          <dt class="col-sm-2">Instruccion / Proveido:</dt>
          <dd class="col-sm-9">{{ detail.reference }}</dd>
          <dt class="col-sm-2">Cantidad</dt>
          <dd class="col-sm-9">
            {{ detail.attachmentQuantity }}
          </dd>
          <dt class="col-sm-2">Status</dt>
          <dd class="col-sm-9">
            <span [style.color]="detail.statusLabel().color">
              {{ detail.statusLabel().label }}</span
            >
          </dd>
        </dl>
      </mat-card-content>
      @if(detail.status==='pending'){
      <mat-card-actions class="action-row-buttons" align="end">
        <button mat-raised-button color="warn" (click)="reject()">
          Rechazar
        </button>
        <button mat-raised-button color="primary" (click)="accept()">
          Aceptar
        </button>
      </mat-card-actions>
      }
    </mat-card>
    }
    <mat-tab-group mat-align-tabs="center">
      <mat-tab label="Detalle">
        @if(procedure()){ @switch (procedure()!.group) { @case
        ('ExternalDetail') {
        <external-detail [data]="external" />
        } @case ('InternalDetail') {
        <internal-detail [data]="internal" />
        } @default {
        <p>Type procedure is note defined</p>
        } } }
      </mat-tab>
      @if(workflow().length>0){
      <mat-tab label="Flujo de trabajo">
        <graph-workflow [data]="workflow()" />
      </mat-tab>
      <mat-tab label="Flujo de trabajo grafico"> </mat-tab>
      }
    </mat-tab-group>
  </div>
</div>
